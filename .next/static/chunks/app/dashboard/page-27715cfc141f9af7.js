(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7201:(e,r,t)=>{Promise.resolve().then(t.bind(t,659))},659:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),s=t(2115),d=t(2615),n=t(6046),i=t(5236),o=t(4085),l=t(1665);t(5716);let c=()=>{let[e,r]=(0,s.useState)([]),[t,d]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null),[o,c]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[m,u]=(0,s.useState)([]);(0,s.useEffect)(()=>{fetch("/api/messages").then(e=>e.json()).then(e=>r(e)).catch(e=>console.error("Error fetching messages:",e))},[]);let b=e=>{window.location.href="tel:".concat(e)},h=e=>{i(e),d(!0)},y=async()=>{if((null==n?void 0:n.email)&&o&&x)try{let e=await fetch("/api/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:n.email,subject:o,content:x})}),r=await e.json();e.ok?(l.oR.success("Email sent successfully!",{position:"top-right"}),d(!1),c(""),g(""),u(e=>[...e,n.id])):(console.error("Server error:",r.error||r.message),l.oR.error(r.message||"Failed to send email. Please try again.",{position:"top-right"}))}catch(e){console.error("Error sending email:",e),l.oR.error("An error occurred while sending the email. Please check your connection and try again.",{position:"top-right"})}else l.oR.error("Please fill out the subject, content fields, and ensure a recipient is selected.",{position:"top-right"})};return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg bg-white shadow-lg dark:bg-gray-800",children:(0,a.jsxs)("table",{className:"w-full table-auto border-collapse border border-gray-300 dark:border-gray-700",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-900",children:[(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"ID"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Service Requested"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Full Name"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Email"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Mobile"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Message"}),(0,a.jsx)("th",{className:"border border-gray-300 px-6 py-3 text-left text-sm font-medium text-gray-900 dark:text-gray-100",children:"Action"})]})}),(0,a.jsx)("tbody",{children:Array.isArray(e)&&e.length>0?e.map(e=>(0,a.jsxs)("tr",{className:"transition duration-300 ".concat(m.includes(e.id)?"bg-green-100 dark:bg-green-700":"hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.id}),(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.service}),(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.email}),(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.mobile}),(0,a.jsx)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:e.message}),(0,a.jsxs)("td",{className:"border border-gray-300 px-6 py-3 text-sm text-gray-700 dark:text-gray-200",children:[(0,a.jsx)("button",{onClick:()=>b(e.mobile),className:"mr-2 rounded-md bg-blue-500 px-4 py-2 text-white transition duration-300 hover:bg-blue-600",children:"Call"}),(0,a.jsx)("button",{onClick:()=>h({...e,email:e.email||""}),className:"rounded-md bg-green-500 px-4 py-2 text-white transition duration-300 hover:bg-green-600",children:"Email"})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center text-gray-500 dark:text-gray-400",children:"No requests available."})})})]})}),t&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-500 bg-opacity-50 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white p-6 shadow-lg dark:bg-gray-800",children:[(0,a.jsxs)("h2",{className:"mb-4 text-xl font-semibold text-gray-900 dark:text-white",children:["Send Email to ","object"==typeof n&&null!==n&&"name"in n&&(n.name||n.email)||"Recipient"]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Subject"}),(0,a.jsx)("input",{id:"subject",type:"text",value:o,onChange:e=>c(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Enter subject"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-900 dark:text-white",children:"Message"}),(0,a.jsx)("textarea",{id:"content",value:x,onChange:e=>g(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Enter message",rows:4})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:y,className:"rounded-md bg-blue-500 px-4 py-2 text-white transition duration-300 hover:bg-blue-600",children:"Send"}),(0,a.jsx)("button",{onClick:()=>d(!1),className:"rounded-md bg-gray-300 px-4 py-2 text-gray-800 transition duration-300 hover:bg-gray-400",children:"Close"})]})]})}),(0,a.jsx)(l.N9,{})]})};function x(){let{data:e,status:r}=(0,d.useSession)(),t=(0,n.useRouter)(),[l,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{if("unauthenticated"===r){t.push("/login");return}x(!1)})()},[r,t]);let g=async()=>{await (0,d.signOut)({redirect:!0,callbackUrl:"/login"})};return l?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,a.jsxs)("div",{className:"min-h-screen pt-16 bg-gray-50",children:[(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,a.jsxs)(o.$,{variant:"outline",onClick:g,className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),"Logout"]})]})}),(0,a.jsx)(c,{})]})}},4085:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var a=t(5155),s=t(2115),d=t(2317),n=t(652),i=t(9602);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:l=!1,...c}=e,x=l?d.DX:"button";return(0,a.jsx)(x,{className:(0,i.cn)(o({variant:s,size:n,className:t})),ref:r,...c})});l.displayName="Button"},9602:(e,r,t)=>{"use strict";t.d(r,{cn:()=>d});var a=t(3463),s=t(9795);function d(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[797,716,60,362,441,517,358],()=>r(7201)),_N_E=e.O()}]);